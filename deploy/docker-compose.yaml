version: "3.8"
services:
  thepostgres:
    image: postgres
    restart: on-failure
    container_name: thepostgres
    env_file:
      - docker.env
    ports:
      - "5432:5432"
  app:
    image: georgejmx/georgejmx:latest
    env_file:
      - docker.env
    volumes:
      - type: bind
        source: /etc/letsencrypt/live/georgejmx.dev
        target: /app/cert/live/georgejmx.dev
      - type: bind
        source: /etc/letsencrypt/archive/georgejmx.dev
        target: /app/cert/archive/georgejmx.dev
    ports:
      - "80:3000"
      - "443:3000"
    restart: on-failure
